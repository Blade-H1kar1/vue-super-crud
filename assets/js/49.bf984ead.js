(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{586:function(e,t,a){},784:function(e,t,a){"use strict";a(586)},858:function(e,t,a){"use strict";a.r(t);a(16),a(61);var o={data(){return{loading:!1,search:{pageNum:1,pageSize:20},options:{init:!0,height:"600px",rowKey:"id",treeProps:{children:"children",hasChildren:"hasChildren"},defaultExpandAll:!0,showSummary:!0,areaSelection:!0,selection:{fixed:!0},index:{fixed:!0},spanMethod:this.objectSpanMethod,renderColumns:[{prop:"department",label:"部门",width:120,search:!0,fixed:!0},{label:"员工基本信息",children:[{prop:"name",label:"姓名",width:100,search:!0},{prop:"gender",label:"性别",width:80,form:{comp:{name:"el-select",options:[{label:"男",value:"男"},{label:"女",value:"女"}]}}},{prop:"age",label:"年龄",width:80,form:{comp:{name:"el-input-number",min:18,max:65}}}]},{label:"职位信息",children:[{prop:"position",label:"职位",width:120},{prop:"level",label:"级别",width:100,form:{comp:{name:"el-select",options:[{label:"初级",value:"初级"},{label:"中级",value:"中级"},{label:"高级",value:"高级"},{label:"专家",value:"专家"}]}}}]},{label:"薪资信息",children:[{prop:"baseSalary",label:"基本工资",width:120,form:{comp:{name:"el-input-number",min:0,precision:2}},formatter:(e,t,a)=>a?"¥"+a.toLocaleString():"-",summary:{type:"sum",prefix:"¥",decimals:2}},{prop:"bonus",label:"奖金",width:100,form:{comp:{name:"el-input-number",min:0,precision:2}},formatter:(e,t,a)=>a?"¥"+a.toLocaleString():"-",summary:{type:"sum",prefix:"¥",decimals:2}},{prop:"totalSalary",label:"总薪资",width:120,formatter:e=>"¥"+((e.baseSalary||0)+(e.bonus||0)).toLocaleString(),summary:{type:"custom",method:e=>"¥"+e.reduce((e,t)=>e+(t.baseSalary||0)+(t.bonus||0),0).toLocaleString()}}]},{label:"联系方式",children:[{prop:"phone",label:"电话",width:130},{prop:"email",label:"邮箱",width:180}]},{prop:"joinDate",label:"入职日期",width:120,form:{comp:{name:"el-date-picker",type:"date",format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd"}}},{prop:"status",label:"状态",width:100,form:{comp:{name:"el-select",options:[{label:"在职",value:"在职"},{label:"离职",value:"离职"},{label:"休假",value:"休假"}]}},render:(e,{row:t})=>{const a=t.status,o={"在职":{color:"#67C23A",text:"在职"},"离职":{color:"#F56C6C",text:"离职"},"休假":{color:"#E6A23C",text:"休假"}}[a]||{color:"#909399",text:a};return e("span",{style:{color:""+o.color,fontWeight:"bold"}},""+o.text)}}],editConfig:{mode:"row"},toolbar:{handles:[{label:"新增员工",type:"primary",icon:"el-icon-plus",onClick:()=>{this.addEmployee()}}]}},data:[],total:0}},methods:{async getList(){this.loading=!0;try{const e=this.generateMockData();this.data=e,this.total=e.length}finally{this.loading=!1}},generateMockData(){const e={"技术部":["前端工程师","后端工程师","测试工程师","架构师"],"产品部":["产品经理","UI设计师","交互设计师","产品助理"],"运营部":["运营专员","市场推广","数据分析师","客服专员"],"人事部":["HR专员","招聘专员","培训师","薪酬专员"]},t=["初级","中级","高级","专家"],a=["男","女"],o=["在职","在职","在职","休假","离职"],l=[];let r=1;return["技术部","产品部","运营部","人事部"].forEach((n,i)=>{const d={id:r++,department:n,name:n+"主管",gender:a[Math.floor(Math.random()*a.length)],age:35+Math.floor(10*Math.random()),position:"部门主管",level:"专家",baseSalary:15e3+Math.floor(1e4*Math.random()),bonus:3e3+Math.floor(5e3*Math.random()),phone:"138"+String(Math.floor(1e8*Math.random())).padStart(8,"0"),email:`manager${i}@company.com`,joinDate:"2020-01-15",status:"在职",children:[]},h=3+Math.floor(4*Math.random());for(let l=0;l<h;l++){const l={id:r++,department:n,name:"员工"+(r-1),gender:a[Math.floor(Math.random()*a.length)],age:22+Math.floor(15*Math.random()),position:e[n][Math.floor(Math.random()*e[n].length)],level:t[Math.floor(Math.random()*t.length)],baseSalary:8e3+Math.floor(12e3*Math.random()),bonus:Math.floor(3e3*Math.random()),phone:"139"+String(Math.floor(1e8*Math.random())).padStart(8,"0"),email:`employee${r-1}@company.com`,joinDate:`202${Math.floor(4*Math.random())}-${String(Math.floor(12*Math.random())+1).padStart(2,"0")}-${String(Math.floor(28*Math.random())+1).padStart(2,"0")}`,status:o[Math.floor(Math.random()*o.length)]};d.children.push(l)}l.push(d)}),l},addEmployee(){const e={id:Date.now(),department:"技术部",name:"新员工",gender:"男",age:25,position:"前端工程师",level:"初级",baseSalary:8e3,bonus:0,phone:"",email:"",joinDate:(new Date).toISOString().split("T")[0],status:"在职"};this.data.unshift(e),this.$message.success("新增员工成功")},getFlatDataWithLevel(e){const t=[],a=(e,o=0)=>{e.forEach(e=>{const l={...e,_level:o};t.push(l),e.children&&e.children.length>0&&a(e.children,o+1)})};return a(e),t},objectSpanMethod({row:e,column:t,rowIndex:a,columnIndex:o}){if("department"!==t.property)return[1,1];const l=this.getFlatDataWithLevel(this.data),r=l[a];if(!r)return[1,1];const n=r.department,i=r._level;let d=1;for(let e=a+1;e<l.length;e++){const t=l[e];if(t._level!==i||t.department!==n)break;d++}let h=!0;for(let e=a-1;e>=0;e--){const t=l[e];if(t._level===i&&t.department===n){h=!1;break}if(t._level!==i)break}return h?[d,1]:[0,0]}}},l=(a(784),a(2)),r=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("h3",[e._v("固定列 + 表头嵌套 + 单元格合并 + 树级数据")]),e._v(" "),t("sc-crud",{attrs:{loading:e.loading,search:e.search,options:e.options,data:e.data,total:e.total},on:{"update:loading":function(t){e.loading=t},"update:search":function(t){e.search=t},getList:e.getList}})],1)}),[],!1,null,"766ed18d",null);t.default=r.exports}}]);